{"ast":null,"code":"import _slicedToArray from\"D:/SwitMe/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"D:/SwitMe/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useCallback,useRef,useEffect}from\"react\";import styled from\"styled-components\";import TimerListContent from\"./TimerListContent\";import{addStopwatch,getTimerList,deleteTimer}from\"../_actions/actions\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 510px;\\n  height: 780px;\\n  border: 1px solid var(--middle);\\n  box-sizing: border-box;\\n  border-radius: 15px;\\n  font-size: 24px;\\n\\n  .head {\\n    font-weight: bold;\\n    height: 84px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    border-top-left-radius: 15px;\\n    border-top-right-radius: 15px;\\n    background-color: var(--middle);\\n    color: white;\\n    justify-content: center;\\n  }\\n\"])));var Button=styled.button(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: fixed;\\n  justify-content: center;\\n  align-items: center;\\n  width: 164px;\\n  height: 40px;\\n  border-radius: 20px;\\n  background-color: var(--deep);\\n  color: white;\\n  font-size: 24px;\\n  font-size: 20px;\\n  outline: none;\\n  border: none;\\n  margin-top: 50px;\\n\"])));var AddTimer=styled.input(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding: 31px;\\n  font-size: 20px;\\n  height: 67px;\\n  width: 100%;\\n  outline: none;\\n  border: none;\\n  border-bottom: 1px solid var(--middle);\\n\"])));function TimerList(_ref){var openModal=_ref.openModal,changeTimer=_ref.changeTimer,change=_ref.change;//타이머 목록\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),toggle=_useState4[0],setToggle=_useState4[1];var dispatch=useDispatch();var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),timers=_useState6[0],setTimers=_useState6[1];useEffect(function(){dispatch(getTimerList(window.localStorage.getItem(\"id\"))).then(function(response){if(response.payload){var _response$payload;var tmp_arr=[];(_response$payload=response.payload)===null||_response$payload===void 0?void 0:_response$payload.map(function(timer){var stopwatch={timer_idx:timer.timer_idx,name:timer.name,duration:0};var time=timer.duration;var second=time%60<10?\"0\"+Math.floor(time%60):Math.floor(time%60);var minute=Math.floor(time/60)<10?\"0\"+Math.floor(time/60):Math.floor(time/60);var hour=Math.floor(time/360);stopwatch[\"duration\"]=hour.toString()+\" : \"+minute.toString()+\" : \"+second.toString();tmp_arr.push(stopwatch);});setTimers(tmp_arr);if(tmp_arr.length>0)changeTimer(tmp_arr[0]);}else{console.log(\"스톱워치 리스트 에러\");}});},[toggle,change]);//추가하기 status:1\nvar Add=function Add(){setStatus(1);};//input\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),value=_useState8[0],setValue=_useState8[1];var onInputChange=useCallback(function(e){setValue(e.target.value);console.log(value);},[]);var nextId=useRef(2);var onInsert=useCallback(function(value){var timer={id:nextId.current,name:value,time:\"00\"};setTimers(timers.concat(timer));nextId.current+=1;},[timers]);var onSubmit=useCallback(function(e){dispatch(addStopwatch(window.localStorage.getItem(\"id\"),{timer_name:value})).then(function(response){if(response.payload){console.log(response.payload);setToggle(!toggle);}else{console.log(\"스톱워치 추가 에러\");}});setValue(\"\");e.preventDefault();setStatus(0);},[value]);//삭제\nvar onRemove=useCallback(function(id){dispatch(deleteTimer(id)).then(function(response){if(response.type){console.log(response.payload);setToggle(!toggle);}else{console.log(\"스톱워치 삭제 에러\");}});},[timers]);//수정\nreturn/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"head\",children:\"2021.07.18. \\uC77C\\uC694\\uC77C\"}),/*#__PURE__*/_jsx(\"div\",{children:timers===null||timers===void 0?void 0:timers.map(function(timer){return/*#__PURE__*/_jsx(TimerListContent,{timer:timer,onRemove:onRemove,openModal:openModal,toggle:toggle,setToggle:setToggle,changeTimer:changeTimer},timer.id);})}),status===1?/*#__PURE__*/_jsx(AddTimer,{type:\"text\",placeholder:\"\\uD0C0\\uC774\\uBA38\\uBA85\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",value:value,onChange:onInputChange}):\"\",/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:[status===0?/*#__PURE__*/_jsx(Button,{onClick:Add,children:\"+ \\uCD94\\uAC00\\uD558\\uAE30\"}):\"\",status===1?/*#__PURE__*/_jsx(Button,{onClick:onSubmit,children:\"+ \\uCD94\\uAC00\\uD558\\uAE30\"}):\"\"]})]});}export default TimerList;","map":{"version":3,"sources":["D:/SwitMe/FrontEnd/src/components/TimerList.js"],"names":["React","useState","useCallback","useRef","useEffect","styled","TimerListContent","addStopwatch","getTimerList","deleteTimer","useDispatch","Wrapper","div","Button","button","AddTimer","input","TimerList","openModal","changeTimer","change","status","setStatus","toggle","setToggle","dispatch","timers","setTimers","window","localStorage","getItem","then","response","payload","tmp_arr","map","timer","stopwatch","timer_idx","name","duration","time","second","Math","floor","minute","hour","toString","push","length","console","log","Add","value","setValue","onInputChange","e","target","nextId","onInsert","id","current","concat","onSubmit","timer_name","preventDefault","onRemove","type","display","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport TimerListContent from \"./TimerListContent\";\r\nimport { addStopwatch, getTimerList, deleteTimer } from \"../_actions/actions\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 510px;\r\n  height: 780px;\r\n  border: 1px solid var(--middle);\r\n  box-sizing: border-box;\r\n  border-radius: 15px;\r\n  font-size: 24px;\r\n\r\n  .head {\r\n    font-weight: bold;\r\n    height: 84px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-top-left-radius: 15px;\r\n    border-top-right-radius: 15px;\r\n    background-color: var(--middle);\r\n    color: white;\r\n    justify-content: center;\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  display: fixed;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 164px;\r\n  height: 40px;\r\n  border-radius: 20px;\r\n  background-color: var(--deep);\r\n  color: white;\r\n  font-size: 24px;\r\n  font-size: 20px;\r\n  outline: none;\r\n  border: none;\r\n  margin-top: 50px;\r\n`;\r\n\r\nconst AddTimer = styled.input`\r\n  padding: 31px;\r\n  font-size: 20px;\r\n  height: 67px;\r\n  width: 100%;\r\n  outline: none;\r\n  border: none;\r\n  border-bottom: 1px solid var(--middle);\r\n`;\r\n\r\nfunction TimerList({ openModal, changeTimer, change }) {\r\n  //타이머 목록\r\n  const [status, setStatus] = useState(0);\r\n  const [toggle, setToggle] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const [timers, setTimers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTimerList(window.localStorage.getItem(\"id\"))).then(\r\n      (response) => {\r\n        if (response.payload) {\r\n          const tmp_arr = [];\r\n          response.payload?.map((timer) => {\r\n            const stopwatch = {\r\n              timer_idx: timer.timer_idx,\r\n              name: timer.name,\r\n              duration: 0,\r\n            };\r\n            const time = timer.duration;\r\n            const second =\r\n              time % 60 < 10\r\n                ? \"0\" + Math.floor(time % 60)\r\n                : Math.floor(time % 60);\r\n            const minute =\r\n              Math.floor(time / 60) < 10\r\n                ? \"0\" + Math.floor(time / 60)\r\n                : Math.floor(time / 60);\r\n            const hour = Math.floor(time / 360);\r\n            stopwatch[\"duration\"] =\r\n              hour.toString() +\r\n              \" : \" +\r\n              minute.toString() +\r\n              \" : \" +\r\n              second.toString();\r\n            tmp_arr.push(stopwatch);\r\n          });\r\n          setTimers(tmp_arr);\r\n          if (tmp_arr.length > 0) changeTimer(tmp_arr[0]);\r\n        } else {\r\n          console.log(\"스톱워치 리스트 에러\");\r\n        }\r\n      }\r\n    );\r\n  }, [toggle, change]);\r\n\r\n  //추가하기 status:1\r\n  const Add = () => {\r\n    setStatus(1);\r\n  };\r\n\r\n  //input\r\n  const [value, setValue] = useState(\"\");\r\n  const onInputChange = useCallback((e) => {\r\n    setValue(e.target.value);\r\n    console.log(value);\r\n  }, []);\r\n\r\n  const nextId = useRef(2);\r\n\r\n  const onInsert = useCallback(\r\n    (value) => {\r\n      const timer = {\r\n        id: nextId.current,\r\n        name: value,\r\n        time: \"00\",\r\n      };\r\n      setTimers(timers.concat(timer));\r\n      nextId.current += 1;\r\n    },\r\n    [timers]\r\n  );\r\n\r\n  const onSubmit = useCallback(\r\n    (e) => {\r\n      dispatch(\r\n        addStopwatch(window.localStorage.getItem(\"id\"), { timer_name: value })\r\n      ).then((response) => {\r\n        if (response.payload) {\r\n          console.log(response.payload);\r\n          setToggle(!toggle);\r\n        } else {\r\n          console.log(\"스톱워치 추가 에러\");\r\n        }\r\n      });\r\n      setValue(\"\");\r\n      e.preventDefault();\r\n      setStatus(0);\r\n    },\r\n    [value]\r\n  );\r\n\r\n  //삭제\r\n  const onRemove = useCallback(\r\n    (id) => {\r\n      dispatch(deleteTimer(id)).then((response) => {\r\n        if (response.type) {\r\n          console.log(response.payload);\r\n          setToggle(!toggle);\r\n        } else {\r\n          console.log(\"스톱워치 삭제 에러\");\r\n        }\r\n      });\r\n    },\r\n    [timers]\r\n  );\r\n\r\n  //수정\r\n\r\n  return (\r\n    <Wrapper>\r\n      <div class=\"head\">2021.07.18. 일요일</div>\r\n\r\n      <div>\r\n        {timers?.map((timer) => (\r\n          <TimerListContent\r\n            timer={timer}\r\n            key={timer.id}\r\n            onRemove={onRemove}\r\n            openModal={openModal}\r\n            toggle={toggle}\r\n            setToggle={setToggle}\r\n            changeTimer={changeTimer}\r\n          ></TimerListContent>\r\n        ))}\r\n      </div>\r\n\r\n      {status === 1 ? (\r\n        <AddTimer\r\n          type=\"text\"\r\n          placeholder=\"타이머명을 입력하세요\"\r\n          value={value}\r\n          onChange={onInputChange}\r\n        ></AddTimer>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {status === 0 ? <Button onClick={Add}>+ 추가하기</Button> : \"\"}\r\n        {status === 1 ? <Button onClick={onSubmit}>+ 추가하기</Button> : \"\"}\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default TimerList;\r\n"]},"metadata":{},"sourceType":"module"}