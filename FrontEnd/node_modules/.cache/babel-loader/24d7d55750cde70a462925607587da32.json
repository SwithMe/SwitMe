{"ast":null,"code":"import _slicedToArray from\"D:/SwitMe/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"D:/SwitMe/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useEffect}from\"react\";import styled from\"styled-components\";import\"../assets/chat.css\";import logo from\"../assets/logo.png\";import Title from\"../components/Title\";import Chat from\"./Chat\";import{getChatlist}from\"../_actions/actions\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Col=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n\"])));var List=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\"])));var Study=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  /* background-color: #56be9c; */\\n  border-bottom: #56be9c solid 1px;\\n  height: 108px;\\n  :hover {\\n    background-color: #56be9c;\\n  }\\n\"])));var Chat_list=function Chat_list(props){// 열기, 닫기, 모달 헤더 텍스트를 부모로부터 받아옴\nvar setinitial=props.setinitial,open=props.open,close=props.close,openstate2=props.openstate2,open2=props.open2,close2=props.close2,header=props.header;var dispatch=useDispatch();var user_id=window.localStorage.getItem(\"id\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),studies=_useState2[0],setStudies=_useState2[1];useEffect(function(){dispatch(getChatlist(user_id)).then(function(response){if(response.payload){console.log(response);setStudies(response.payload);var _arr=new Array(response.payload.length);_arr.fill(false);setinitial(_arr);}else{console.log(\"채팅 목록 불러오기 에러\");}});var arr=new Array(5);arr.fill(false);setinitial(arr);},[open]);return/*#__PURE__*/ (// 모달이 열릴때 openModal 클래스가 생성된다.\n_jsx(\"div\",{className:open?\"openModal modal\":\"modal\",children:open?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"header\",{style:{height:\"95px\",alignItems:\"center\",display:\"flex\",justifyContent:\"center\",boxShadow:\"0px 5px 15px grey\"},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:logo,style:{width:\"136px\"}})}),header,/*#__PURE__*/_jsxs(\"button\",{className:\"close\",onClick:close,children:[\" \",\"\\xD7\",\" \"]})]}),/*#__PURE__*/_jsxs(\"main\",{children:[props.children,/*#__PURE__*/_jsx(List,{children:studies===null||studies===void 0?void 0:studies.map(function(study,i){return/*#__PURE__*/_jsxs(Study,{onClick:!openstate2[i]?function(){return open2(i);}:function(){},children:[/*#__PURE__*/_jsx(React.Fragment,{children:openstate2[i]?/*#__PURE__*/_jsx(Chat,{open:openstate2[i],close:function close(){return close2(i);},header:\"\",other_user:study.other_user,room_idx:study.room_idx}):/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsx(\"img\",{alt:\"study profile\",src:require(\"../assets/circle.png\").default,style:{marginLeft:\"30px\"}}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"300px\"},children:/*#__PURE__*/_jsx(Title,{size:\"20\",weight:\"400\",children:study.other_user})}),/*#__PURE__*/_jsx(\"div\",{children:study.message})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"unread\",src:require(\"../assets/circle2.png\").default,style:{marginRight:\"35px\"}})})]},i);})})]}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsx(\"div\",{style:{height:\"67px\"}})})]}):null}));};export default Chat_list;","map":{"version":3,"sources":["D:/SwitMe/FrontEnd/src/components/Chat_list.js"],"names":["React","useState","useEffect","styled","logo","Title","Chat","getChatlist","useDispatch","Col","div","List","Study","Chat_list","props","setinitial","open","close","openstate2","open2","close2","header","dispatch","user_id","window","localStorage","getItem","studies","setStudies","then","response","payload","console","log","arr","Array","length","fill","height","alignItems","display","justifyContent","boxShadow","width","children","map","study","i","other_user","room_idx","require","default","marginLeft","message","marginRight"],"mappings":"wVAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAO,oBAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,OAASC,WAAT,KAA4B,qBAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,C,6IAEA,GAAMC,CAAAA,GAAG,CAAGN,MAAM,CAACO,GAAV,gHAAT,CAKA,GAAMC,CAAAA,IAAI,CAAGR,MAAM,CAACO,GAAV,8IAAV,CAMA,GAAME,CAAAA,KAAK,CAAGT,MAAM,CAACO,GAAV,sTAAX,CAaA,GAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CAC3B;AACA,GAAQC,CAAAA,UAAR,CAAuED,KAAvE,CAAQC,UAAR,CAAoBC,IAApB,CAAuEF,KAAvE,CAAoBE,IAApB,CAA0BC,KAA1B,CAAuEH,KAAvE,CAA0BG,KAA1B,CAAiCC,UAAjC,CAAuEJ,KAAvE,CAAiCI,UAAjC,CAA6CC,KAA7C,CAAuEL,KAAvE,CAA6CK,KAA7C,CAAoDC,MAApD,CAAuEN,KAAvE,CAAoDM,MAApD,CAA4DC,MAA5D,CAAuEP,KAAvE,CAA4DO,MAA5D,CACA,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,OAAO,CAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,IAA5B,CAAhB,CAEA,cAA8BzB,QAAQ,CAAC,EAAD,CAAtC,wCAAO0B,OAAP,eAAgBC,UAAhB,eAEA1B,SAAS,CAAC,UAAM,CACdoB,QAAQ,CAACf,WAAW,CAACgB,OAAD,CAAZ,CAAR,CAA+BM,IAA/B,CAAoC,SAACC,QAAD,CAAc,CAChD,GAAIA,QAAQ,CAACC,OAAb,CAAsB,CACpBC,OAAO,CAACC,GAAR,CAAYH,QAAZ,EACAF,UAAU,CAACE,QAAQ,CAACC,OAAV,CAAV,CACA,GAAIG,CAAAA,IAAG,CAAG,GAAIC,CAAAA,KAAJ,CAAUL,QAAQ,CAACC,OAAT,CAAiBK,MAA3B,CAAV,CACAF,IAAG,CAACG,IAAJ,CAAS,KAAT,EACAtB,UAAU,CAACmB,IAAD,CAAV,CACD,CAND,IAMO,CACLF,OAAO,CAACC,GAAR,CAAY,eAAZ,EACD,CACF,CAVD,EAWA,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,CAAU,CAAV,CAAV,CACAD,GAAG,CAACG,IAAJ,CAAS,KAAT,EACAtB,UAAU,CAACmB,GAAD,CAAV,CACD,CAfQ,CAeN,CAAClB,IAAD,CAfM,CAAT,CAiBA,oBACE;AACA,YAAK,SAAS,CAAEA,IAAI,CAAG,iBAAH,CAAuB,OAA3C,UACGA,IAAI,cACH,wCACE,gBACE,KAAK,CAAE,CACLsB,MAAM,CAAE,MADH,CAELC,UAAU,CAAE,QAFP,CAGLC,OAAO,CAAE,MAHJ,CAILC,cAAc,CAAE,QAJX,CAKLC,SAAS,CAAE,mBALN,CADT,wBASE,kCACE,YAAK,GAAG,CAAEtC,IAAV,CAAgB,KAAK,CAAE,CAAEuC,KAAK,CAAE,OAAT,CAAvB,EADF,EATF,CAYGtB,MAZH,cAaE,gBAAQ,SAAS,CAAC,OAAlB,CAA0B,OAAO,CAAEJ,KAAnC,WACG,GADH,QAEU,GAFV,GAbF,GADF,cAmBE,wBACGH,KAAK,CAAC8B,QADT,cAEE,KAAC,IAAD,WACGjB,OADH,SACGA,OADH,iBACGA,OAAO,CAAEkB,GAAT,CAAa,SAACC,KAAD,CAAQC,CAAR,CAAc,CAC1B,mBACE,MAAC,KAAD,EAEE,OAAO,CAAE,CAAC7B,UAAU,CAAC6B,CAAD,CAAX,CAAiB,iBAAM5B,CAAAA,KAAK,CAAC4B,CAAD,CAAX,EAAjB,CAAkC,UAAM,CAAE,CAFrD,wBAIE,KAAC,KAAD,CAAO,QAAP,WACG7B,UAAU,CAAC6B,CAAD,CAAV,cACC,KAAC,IAAD,EACE,IAAI,CAAE7B,UAAU,CAAC6B,CAAD,CADlB,CAEE,KAAK,CAAE,uBAAM3B,CAAAA,MAAM,CAAC2B,CAAD,CAAZ,EAFT,CAGE,MAAM,CAAC,EAHT,CAIE,UAAU,CAAED,KAAK,CAACE,UAJpB,CAKE,QAAQ,CAAEF,KAAK,CAACG,QALlB,EADD,cASC,kBAVJ,EAJF,cAiBE,YACE,GAAG,CAAC,eADN,CAEE,GAAG,CAAEC,OAAO,CAAC,sBAAD,CAAP,CAAgCC,OAFvC,CAGE,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAd,CAHT,EAjBF,cAsBE,MAAC,GAAD,yBACE,YAAK,KAAK,CAAE,CAAET,KAAK,CAAE,OAAT,CAAZ,uBACE,KAAC,KAAD,EAAO,IAAI,CAAC,IAAZ,CAAiB,MAAM,CAAC,KAAxB,UACGG,KAAK,CAACE,UADT,EADF,EADF,cAME,qBAAMF,KAAK,CAACO,OAAZ,EANF,GAtBF,cA8BE,kCACE,YACE,GAAG,CAAC,QADN,CAEE,GAAG,CAAEH,OAAO,CAAC,uBAAD,CAAP,CAAiCC,OAFxC,CAGE,KAAK,CAAE,CAAEG,WAAW,CAAE,MAAf,CAHT,EADF,EA9BF,GACOP,CADP,CADF,CAwCD,CAzCA,CADH,EAFF,GAnBF,cAmEE,qCACE,YAAK,KAAK,CAAE,CAAET,MAAM,CAAE,MAAV,CAAZ,EADF,EAnEF,GADG,CA4ED,IA7EN,EAFF,EAkFD,CA3GD,CA6GA,cAAezB,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport \"../assets/chat.css\";\r\nimport logo from \"../assets/logo.png\";\r\nimport Title from \"../components/Title\";\r\nimport Chat from \"./Chat\";\r\nimport { getChatlist } from \"../_actions/actions\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Col = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst List = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Study = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  /* background-color: #56be9c; */\r\n  border-bottom: #56be9c solid 1px;\r\n  height: 108px;\r\n  :hover {\r\n    background-color: #56be9c;\r\n  }\r\n`;\r\n\r\nconst Chat_list = (props) => {\r\n  // 열기, 닫기, 모달 헤더 텍스트를 부모로부터 받아옴\r\n  const { setinitial, open, close, openstate2, open2, close2, header } = props;\r\n  const dispatch = useDispatch();\r\n  const user_id = window.localStorage.getItem(\"id\");\r\n\r\n  const [studies, setStudies] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getChatlist(user_id)).then((response) => {\r\n      if (response.payload) {\r\n        console.log(response);\r\n        setStudies(response.payload);\r\n        let arr = new Array(response.payload.length);\r\n        arr.fill(false);\r\n        setinitial(arr);\r\n      } else {\r\n        console.log(\"채팅 목록 불러오기 에러\");\r\n      }\r\n    });\r\n    let arr = new Array(5);\r\n    arr.fill(false);\r\n    setinitial(arr);\r\n  }, [open]);\r\n\r\n  return (\r\n    // 모달이 열릴때 openModal 클래스가 생성된다.\r\n    <div className={open ? \"openModal modal\" : \"modal\"}>\r\n      {open ? (\r\n        <section>\r\n          <header\r\n            style={{\r\n              height: \"95px\",\r\n              alignItems: \"center\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              boxShadow: \"0px 5px 15px grey\",\r\n            }}\r\n          >\r\n            <div>\r\n              <img src={logo} style={{ width: \"136px\" }} />\r\n            </div>\r\n            {header}\r\n            <button className=\"close\" onClick={close}>\r\n              {\" \"}\r\n              &times;{\" \"}\r\n            </button>\r\n          </header>\r\n          <main>\r\n            {props.children}\r\n            <List>\r\n              {studies?.map((study, i) => {\r\n                return (\r\n                  <Study\r\n                    key={i}\r\n                    onClick={!openstate2[i] ? () => open2(i) : () => {}}\r\n                  >\r\n                    <React.Fragment>\r\n                      {openstate2[i] ? (\r\n                        <Chat\r\n                          open={openstate2[i]}\r\n                          close={() => close2(i)}\r\n                          header=\"\"\r\n                          other_user={study.other_user}\r\n                          room_idx={study.room_idx}\r\n                        ></Chat>\r\n                      ) : (\r\n                        <></>\r\n                      )}\r\n                    </React.Fragment>\r\n                    <img\r\n                      alt=\"study profile\"\r\n                      src={require(\"../assets/circle.png\").default}\r\n                      style={{ marginLeft: \"30px\" }}\r\n                    />\r\n                    <Col>\r\n                      <div style={{ width: \"300px\" }}>\r\n                        <Title size=\"20\" weight=\"400\">\r\n                          {study.other_user}\r\n                        </Title>\r\n                      </div>\r\n                      <div>{study.message}</div>\r\n                    </Col>\r\n                    <div>\r\n                      <img\r\n                        alt=\"unread\"\r\n                        src={require(\"../assets/circle2.png\").default}\r\n                        style={{ marginRight: \"35px\" }}\r\n                      />\r\n                    </div>\r\n                  </Study>\r\n                );\r\n              })}\r\n            </List>\r\n          </main>\r\n\r\n          <footer>\r\n            <div style={{ height: \"67px\" }}></div>\r\n            {/* <button className=\"close\" onClick={close}>\r\n              {\" \"}\r\n              close{\" \"}\r\n            </button> */}\r\n          </footer>\r\n        </section>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat_list;\r\n"]},"metadata":{},"sourceType":"module"}